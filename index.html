<!DOCTYPE html>
<html>
  <head>
    <title>De Koen Quiz ðŸŽ¯</title>
    <style>
      body {
        font-family: sans-serif;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
      }
      input, button {
        margin: 5px;
        padding: 8px;
      }
    </style>
  </head>
  <body>
    <h1>De Koen Quiz</h1>
    <div id="question">Loading today's question...</div>

    <input id="username" placeholder="Your name" />
    <input id="answer" placeholder="Your answer" />
    <button onclick="submitAnswer()">Submit</button>

    <script>
      async function loadQuestion() {
        const res = await fetch("/question");
        const data = await res.json();
        document.getElementById("question").innerText = data.question || "No question today yet!";
      }

      async function submitAnswer() {
        const user_name = document.getElementById("username").value;
        const answer = document.getElementById("answer").value;
        const resQ = await fetch("/question");
        const question = await resQ.json();
        const question_id = question.id;

        if(!question_id) return alert("No question today!");

        await fetch("/answer", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ user_name, answer, question_id }),
        });
        alert("Answer sent!");
      }

      loadQuestion();
    </script>
  </body>
</html>
